<mvc:View
    displayBlock="true"
    controllerName="com.nagarro.www.presalestracker.controller.Detail"
    height="100%"
    xmlns="sap.uxap"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:m="sap.m"
    xmlns:f="sap.f"
    xmlns:l="sap.ui.layout"
    xmlns:form="sap.ui.layout.form"
>
    <ObjectPageLayout
        id="ObjectPageLayout"
        showTitleInHeaderContent="true"
        alwaysShowContentHeader="false"
        preserveHeaderStateOnScroll="false"
        headerContentPinnable="true"
        isChildPage="true"
        upperCaseAnchorBar="false"
    >
        <headerTitle>
            <ObjectPageDynamicHeaderTitle id="_IDGenObjectPageDynamicHeaderTitle">
                <expandedHeading>
                    <m:Title id="_IDGenTitle1"
                        text="Details"
                        wrapping="true"
                        class="sapUiSmallMarginEnd"
                    />
                </expandedHeading>
                <navigationActions>
                    <m:OverflowToolbarButton
                        type="Transparent"
                        icon="sap-icon://full-screen"
                        press="handleFullScreen"
                        id="enterFullScreenBtn"
                        tooltip="Enter Full Screen Mode"
                        visible="true"
                    />
                    <m:OverflowToolbarButton
                        type="Transparent"
                        icon="sap-icon://exit-full-screen"
                        press="handleExitFullScreen"
                        id="exitFullScreenBtn"
                        tooltip="Exit Full Screen Mode"
                        visible="true"
                    />
                    <m:OverflowToolbarButton id="_IDGenOverflowToolbarButton1"
                        type="Transparent"
                        icon="sap-icon://decline"
                        press="handleClose"
                        tooltip="Close middle column"
                        visible="true"
                    />
                </navigationActions>

                <actions>
                    <m:Switch id="_IDGenSwitch"
                        state="{viewEditableModel>/editMode}"
                        customTextOn="Edit"
                        customTextOff="Display"
                    />
                    <m:CheckBox id="_IDGenCheckBox"
                        selected="{viewEditableModel>/showTable}"
                        text="Show Table View"
                        select="onToggleRemarksView"
                    />
                    <m:Button id="_IDGenButton2"
                        text="Delete"
                        type="Transparent"
                    />
                    <m:Button id="_IDGenButton3"
                        icon="sap-icon://action"
                        type="Transparent"
                    />
                </actions>
            </ObjectPageDynamicHeaderTitle>
        </headerTitle>
        <sections>
            <ObjectPageSection id="_IDGenObjectPageSection" title="General Information">
                <subSections>
                    <ObjectPageSubSection id="_IDGenObjectPageSubSection">
                        <blocks>
                            <form:SimpleForm id="_IDGenSimpleForm"
                                maxContainerCols="2"
                                editable="false"
                                layout="ResponsiveGridLayout"
                                labelSpanL="12"
                                labelSpanM="12"
                                emptySpanL="0"
                                emptySpanM="0"
                                columnsL="1"
                                columnsM="1"
                            >
                                <form:content>
                                    <m:Label id="_IDGenLabel" text="Customer" />
                                    <m:Text id="_IDGenText1" text="{Geography}" />
                                    <m:Label id="_IDGenLabel1" text="Line Of Business" />
                                    <m:Text id="_IDGenText2" text="{LineOfBusiness}" />
                                    <m:Label id="_IDGenLabel2" text="Status" />
                                    <m:Text id="_IDGenText3" text="{Status}" />
                                </form:content>
                            </form:SimpleForm>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
            <ObjectPageSection id="_IDGenObjectPageSection1" title="Remarks">
                <subSections>
                    <ObjectPageSubSection id="_IDGenObjectPageSubSection1">
                        <blocks>
                            <m:VBox id="_IDGenVBox"
                                width="100%"
                                renderType="Bare"
                            >
                                <m:TextArea
                                    id="idNewRemark"
                                    rows="1"
                                    width="100%"
                                    placeholder="Add new remark here..."
                                    visible="{viewEditableModel>/editMode}"
                                    liveChange="onNewRemarkLiveChange"
                                />
                                <m:ToolbarSeparator id="_IDGenToolbarSeparator" visible="{viewEditableModel>/editMode}"/>
                                <m:TextArea
                                    id="idRemarksTextArea"
                                    rows="5"
                                    visible="{= !${viewEditableModel>/showTable} }"
                                    width="100%"
                                    editable="false"
                                    value="{viewEditableModel>/remarksText}"
                                />
                                <m:Table
                                    visible="{viewEditableModel>/showTable}"
                                    id="idRemarksTable"
                                    mode="SingleSelectMaster"
                                    itemPress="handleItemPress"
                                    items="{path : 'toRemarks'}"
                                >
                                    <m:columns>
                                        <m:Column id="_IDGenColumn" />
                                    </m:columns>
                                    <m:items>
                                        <m:ColumnListItem id="_IDGenColumnListItem" type="Navigation">
                                            <m:cells>
                                                <m:Text id="_IDGenText4" text="{RmText}" tooltip="{CreatedBy}, {CreatedOn}"/>
                                            </m:cells>
                                        </m:ColumnListItem>
                                    </m:items>
                                </m:Table>
                                <!-- Existing Remarks display (TextArea or Table) -->
                            </m:VBox>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
            <ObjectPageSection id="_IDGenObjectPageSection2" title="Partners">
                <subSections>
                    <ObjectPageSubSection id="_IDGenObjectPageSubSection2">
                        <blocks>
                            <m:Table
                                id="idPartnersTable"
                                mode="SingleSelectMaster"
                                itemPress="handleItemPress"
                                items="{path : 'toParters'}"
                            >
                                <m:columns>
                                    <m:Column id="_IDGenColumn1" />
                                </m:columns>
                                <m:items>
                                    <m:ColumnListItem id="_IDGenColumnListItem1" type="Navigation">
                                        <m:cells>
                                            <m:ObjectIdentifier id="_IDGenObjectIdentifier"
                                                text="{PartnerName}"
                                            />
                                        </m:cells>
                                    </m:ColumnListItem>
                                </m:items>
                            </m:Table>
                        </blocks>
                    </ObjectPageSubSection>
                </subSections>
            </ObjectPageSection>
        </sections>
    </ObjectPageLayout>
</mvc:View>
